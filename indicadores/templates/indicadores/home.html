{% extends "base.html" %}
{% block content %}

<style>
    .dashboard-container {
        background: #f5f5f5;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.15);
        margin-top: 20px;
    }

    .dashboard-title {
        text-align: center;
        font-size: 28px;
        margin-bottom: 20px;
    }

    .action-buttons {
        display: flex;
        gap: 12px;
        margin-bottom: 20px;
        justify-content: center;
    }

    .action-buttons a {
        padding: 10px 18px;
        border-radius: 8px;
        font-size: 15px;
        text-decoration: none;
    }

    iframe {
        border: none;
        width: 100%;
        height: 85vh;
        border-radius: 10px;
    }
</style>

<div class="dashboard-container">

    <h2 class="dashboard-title">ðŸ“Š RelatÃ³rio Power BI â€” Indicadores</h2>

    <!-- BotÃµes organizados -->
    <div class="action-buttons">
        <a href="{% url 'adicionar_indicador' %}" class="btn btn-add" id="btn-add">âž• Novo Indicador</a>
        <a href="{% url 'indicadores_lista' %}" class="btn btn-list">ðŸ“‹ Listar Indicadores</a>
    </div>

    <!-- IFRAME elegante e grande -->
    <iframe
        id="dashboard"
        title="analise"
        src="https://app.powerbi.com/view?r=eyJrIjoiNjU0MTg4M2YtNmQzZS00ODBlLWE3NDUtNzgyOTk0NmEwODdlIiwidCI6ImNmNzJlMmJkLTdhMmItNDc4My1iZGViLTM5ZDU3YjA3Zjc2ZiIsImMiOjR9"
        allowFullScreen="true">
    </iframe>

</div>


<!-- Script de atualizaÃ§Ã£o -->
<script>
function atualizarDashboard() {
    const iframe = document.getElementById('dashboard');
    iframe.src = iframe.src; 
}

const btnAdd = document.getElementById('btn-add');
if (btnAdd) {
    btnAdd.addEventListener('click', function() {
        setTimeout(atualizarDashboard, 1000);
    });
}
</script>

{% endblock %}
